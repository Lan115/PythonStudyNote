## 赋值 (=)

```
# 只是创建引用，共享同一内存地址
list1 = [1, 2, [3, 4]]
list2 = list1  # list2和list1指向同一个对象

list2[0] = 99
print(list1)  # [99, 2, [3, 4]] - 原列表也被修改
```

## 浅拷贝 (Shallow Copy)

```
import copy

list1 = [1, 2, [3, 4]]
list2 = copy.copy(list1)  # 或者 list1.copy() 或 list1[:]

list2[0] = 99  # 修改第一层元素，不影响原列表
print(list1)   # [1, 2, [3, 4]]

list2[2][0] = 888  # 修改嵌套对象，原列表也被影响！
print(list1)       # [1, 2, [888, 4]]
```

## 深拷贝 (Deep Copy)

```
import copy

list1 = [1, 2, [3, 4]]
list2 = copy.deepcopy(list1)

list2[0] = 99      # 修改第一层
list2[2][0] = 888  # 修改嵌套对象

print(list1)  # [1, 2, [3, 4]] - 完全不受影响
print(list2)  # [99, 2, [888, 4]]
```

# 不同数据类型的拷贝行为

## 列表

```
import copy

# 浅拷贝方法
list1 = [1, 2, 3]
list2 = list1.copy()      # 方法1
list3 = list1[:]          # 方法2
list4 = copy.copy(list1)  # 方法3

# 深拷贝
list5 = copy.deepcopy(list1)
```

## 字典

```
dict1 = {'a': 1, 'b': [2, 3]}
dict2 = dict1.copy()        # 浅拷贝
dict3 = copy.deepcopy(dict1) # 深拷贝
```

## 集合

```
set1 = {1, 2, 3}
set2 = set1.copy()          # 浅拷贝（集合元素不可变，浅拷贝足够）
```

# 可视化理解

```
原始对象: [1, 2, [3, 4]]
         ↑   ↑   ↑
         │   │   └── 嵌套列表（可变对象）
         │   └── 数字（不可变）
         └── 数字（不可变）

浅拷贝:  创建新容器，但嵌套对象仍然共享
深拷贝:  完全递归复制所有层次的对象
```

# 使用场景建议

## 使用浅拷贝的情况：

```
# 1. 只有一层结构的数据
simple_list = [1, 2, 3]
shallow_copy = simple_list.copy()

# 2. 元素都是不可变对象
immutable_list = [1, 'hello', (4, 5)]
shallow_copy = immutable_list.copy()  # 浅拷贝足够

# 3. 明确需要共享嵌套对象时
config = {'setting': {'theme': 'dark'}}
user_config = config.copy()  # 共享theme配置
```

## 使用深拷贝的情况：

```
# 1. 多层嵌套结构且需要完全独立
nested_data = {'users': [{'name': 'Alice'}, {'name': 'Bob'}]}
independent_copy = copy.deepcopy(nested_data)

# 2. 需要修改副本而不影响原对象时
original = [[1, 2], [3, 4]]
backup = copy.deepcopy(original)  # 安全备份

# 3. 函数参数传递避免副作用
def process_data(data):
    data_copy = copy.deepcopy(data)
    # 安全处理，不影响原数据
```

## 总结对比

| 特性             | 赋值 (=) | 浅拷贝   | 深拷贝       |
| :--------------- | :------- | :------- | :----------- |
| **创建新对象**   | ❌        | ✅        | ✅            |
| **复制第一层**   | ❌        | ✅        | ✅            |
| **复制嵌套对象** | ❌        | ❌        | ✅            |
| **内存共享**     | 完全共享 | 部分共享 | 完全不共享   |
| **性能**         | 最快     | 较快     | 较慢         |
| **使用场景**     | 创建别名 | 简单复制 | 完全独立副本 |